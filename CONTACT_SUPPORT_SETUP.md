# Contact Support Feature - Setup Instructions

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

–î–æ–±–∞–≤–ª–µ–Ω–∞ –º–µ—Ö–∞–Ω–∏–∫–∞ "Contact Support" —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å CRM.

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (schema.prisma)**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ Contact Support:
     - `contactSupportActive` - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ä–µ–∂–∏–º
     - `contactSupportBonusAmount` - —Å—É–º–º–∞ –±–æ–Ω—É—Å–∞
     - `contactSupportTimerMinutes` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∞–π–º–µ—Ä–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
     - `contactSupportActivatedAt` - –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

2. **API (telegram-bot/src/api.ts)**
   - –î–æ–±–∞–≤–ª–µ–Ω endpoint `POST /api/admin/users/:telegramId/contact-support` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω endpoint `GET /api/user/:telegramId` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

3. **CRM –ø–∞–Ω–µ–ª—å (crm/src/components/pages/Users.tsx)**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìû Contact Support" –≤ –¥–∏–∞–ª–æ–≥–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
   - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–æ–¥–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
     - –°—É–º–º–∞ –±–æ–Ω—É—Å–∞ ($)
     - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∞–π–º–µ—Ä–∞ (–º–∏–Ω—É—Ç—ã)

4. **Telegram Mini App (telegram-app/src/App.tsx)**
   - –°–æ–∑–¥–∞–Ω –º–æ–¥–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Contact Support —Å:
     - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—É–º–º—ã –±–æ–Ω—É—Å–∞
     - –¢–∞–π–º–µ—Ä–æ–º –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞ (–¥–Ω–∏:—á–∞—Å—ã:–º–∏–Ω—É—Ç—ã:—Å–µ–∫—É–Ω–¥—ã)
     - –ö–Ω–æ–ø–∫–æ–π "Send" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ @SyntrixSupport
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### 1. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
cd telegram-bot

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Prisma
npx prisma migrate dev --name add_contact_support_fields

# –ò–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É –Ω–∞–ø—Ä—è–º—É—é
npx prisma db push

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
node add-contact-support-fields.cjs
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å telegram-bot
cd telegram-bot
npm run build
pm2 restart telegram-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å CRM (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
cd ../crm
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å telegram-app (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
cd ../telegram-app
npm run build
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ CRM:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "Users"
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–∂–º–∏—Ç–µ "View")
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üìû Contact Support"
4. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **Bonus Token Amount** - —Å—É–º–º–∞ –±–æ–Ω—É—Å–∞ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: 50)
   - **Timer Duration** - –≤—Ä–µ–º—è —Ç–∞–π–º–µ—Ä–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: 4320 = 3 –¥–Ω—è)
5. –ù–∞–∂–º–∏—Ç–µ "Activate"

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–µ–ª–µ–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å:
   - –°—É–º–º–æ–π –±–æ–Ω—É—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 50$)
   - –¢–∞–π–º–µ—Ä–æ–º –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
   - –°–∏–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º "Contact support to activate the bot and get a bonus deposit"
   - –ó–µ–ª–µ–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π "Send"
3. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Send" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è @SyntrixSupport –≤ Telegram
4. –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –æ–∫–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

## –î–∏–∑–∞–π–Ω –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∏–∑–∞–π–Ω—É —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞:
- ‚úÖ –ó–µ–ª–µ–Ω–∞—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –ø—É–Ω–∫—Ç–∏—Ä–Ω–æ–π —Ä–∞–º–∫–æ–π
- ‚úÖ –°—É–º–º–∞ –±–æ–Ω—É—Å–∞ –∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É
- ‚úÖ –¢–∞–π–º–µ—Ä —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ –¥–Ω–∏, —á–∞—Å—ã, –º–∏–Ω—É—Ç—ã, —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ –°–∏–Ω–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ –ó–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "Send"
- ‚úÖ –ò–∫–æ–Ω–∫–∞ –ª–æ–∫–∞—Ü–∏–∏ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∫–∞—Ä—Ç–æ—á–∫–∏
- ‚úÖ –§–æ–Ω–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Å—Ö–µ–º—ã

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç—Å—á–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –≤—Ä—É—á–Ω—É—é, –Ω–æ –æ–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è —Å–Ω–æ–≤–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ (–µ—Å–ª–∏ —Ç–∞–π–º–µ—Ä –µ—â–µ –Ω–µ –∏—Å—Ç–µ–∫)
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ `contactSupportActive` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è - —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
